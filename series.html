<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1f1f1f">
  <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://purushothmathav.github.io/PanguPlay/favicon.png">
  <title>PanguPlay - Shows</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #121212; color: #fff; font-family: Arial, sans-serif; }
    a { color: inherit; text-decoration: none; }
    img { width: 100%; height: 180px; object-fit: cover; border-radius: 10px }

    .navbar { background: #1f1f1f; display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; position: sticky; top: 0; z-index: 1000; }
    .nav-left, .nav-right { display: flex; align-items: center; }
    .nav-logo { font-weight: bold; font-size: 20px; }
    .nav-links { display: flex; gap: 15px; margin-left: 20px; }
    .nav-links a { padding: 5px 10px; border-radius: 5px; transition: 0.3s; }
    .nav-links a:hover { background: #333; }
    .menu-icon { font-size: 24px; cursor: pointer; display: none; }
    .search-bar { display: flex; align-items: center; position: relative; }
	.search-bar input { padding: 6px 10px; border: 1px solid #444; background: #2a2a2a; color: #fff; border-radius: 20px; outline: none; width: 180px; transition: all 0.3s ease; }
	.search-bar input:focus { border-color: #ff4500; background: #1e1e1e; }
	.search-results { position: absolute; top: 110%; background: #2a2a2a; width: 200px; border-radius: 8px; overflow: hidden; display: none; right: 0; }
    .search-results div { padding: 10px; border-bottom: 1px solid #444; cursor: pointer; }
    .search-results div:hover { background: #333; }
    .search-bar { position: relative; display: flex; align-items: center; }
    #searchInput { padding-right: 30px; }
    #clearButton { position: absolute; right: 8px; background: none; border: none; color: #aaa; cursor: pointer; font-size: 14px; display: none; }

    /* Mobile Menu Backdrop */
    .mobile-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
      z-index: 1999;
      display: none;
    }

    /* Updated Mobile Menu */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -100%;
      width: 250px;
      height: 100%;
      background: #202020;
      display: flex;
      flex-direction: column;
      padding: 20px;
      transition: left 0.3s ease;
      z-index: 2000;
      box-shadow: 5px 0 15px rgba(0,0,0,0.2);
      border-right: 2px solid #333;
    }

    .mobile-menu.open {
      left: 0;
    }

    .mobile-menu a {
      margin: 15px 0;
      font-size: 18px;
      color: #fff;
      padding: 10px;
      border-radius: 8px;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .mobile-menu a:hover {
      background: #2a2a2a;
    }

    .close-btn {
      font-size: 22px;
      color: #fff;
      background: none;
      border: none;
      align-self: flex-end;
      margin-bottom: 20px;
      cursor: pointer;
    }

     /* Sections */
    .section { padding: 20px 15px; }
    .section h2 { margin-bottom: 15px; font-size: 18px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
    .card { background: #1f1f1f; border-radius: 10px; overflow: hidden; transition: 0.3s; font-size: 12px; text-align: center; cursor: pointer; }
    .card:hover { transform: scale(1.05); }
    .card-title { padding: 8px 5px; font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    /* Placeholder styling */
    .placeholder-image {
      position: relative;
      background: linear-gradient(135deg, #1f1f1f 0%, #303030 100%);
      height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border-radius: 10px 10px 0 0;
    }
    
    .placeholder-icon {
      font-size: 50px;
      opacity: 0.5;
    }
    
    .placeholder-text {
      position: absolute;
      bottom: 0;
      width: 100%;
      padding: 5px;
      background: rgba(0,0,0,0.6);
      font-size: 10px;
      color: #ccc;
    }
	/* Quality Tag Styling */
    .quality-tag {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      z-index: 5;
    }
    
    .quality-4k {
      background: linear-gradient(135deg, #8a2be2, #4b0082);
    }
    
    .quality-hd {
      background: linear-gradient(135deg, #1e90ff, #0000cd);
    }
    
    .quality-sd {
      background: linear-gradient(135deg, #696969, #2f4f4f);
    }
    
    /* Card Image Container */
    .card-image-container {
      position: relative;
    }

    /* Swiper Styles */
.swiper {
  width: 100%;
  height: 250px; /* Adjust height to accommodate the title */
  margin-bottom: 20px;
}

.swiper-slide img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 10px;
}

.swiper-slide-title {
  text-align: center;
  font-size: 14px;
  margin-top: 5px;
  color: #fff;
  font-weight: bold;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.swiper-pagination {
  position: relative;
  bottom: 10px;
  text-align: center;
}
	.swiper-pagination-bullet {   width: 12px; height: 12px; border-radius: 0; background: #ff6600; }
    footer { text-align: center; padding: 20px; font-size: 14px; background: #1f1f1f; margin-top: 20px; }

    @media(max-width:768px) {
      .nav-links { display: none; }
      .menu-icon { display: block; }
      .cards { grid-template-columns: repeat(3, 1fr); }
	  .search-bar input { width: 140px; }
    }

 .section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  padding: 20px 0 10px 0;
}

.section-header h2 {
  font-size: 20px;
  margin: 0;
  white-space: nowrap;
  flex-shrink: 0;
}

.filters {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.filters select,
.filters button {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid #444;
  background: #232323;
  color: #fff;
  font-size: 14px;
  outline: none;
  transition: border 0.2s, background 0.2s;
  min-width: 90px;
}

.filters button {
  background: #ff4500;
  border: none;
  font-weight: 600;
  transition: background 0.2s;
}

.filters button:hover {
  background: #e03e00;
}

@media (max-width: 768px) {
  .section-header {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
    padding: 16px 0 8px 0;
  }
  .filters {
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 6px;
    padding-bottom: 4px;
  }
  .filters select,
  .filters button {
    min-width: 40px;
    font-size: 13px;
    padding: 5px 8px;
    flex: 0 0 auto;
  }
}   

    /* Back to top button styling */
    #backToTopBtn {
      display: none; /* Hidden by default */
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 99;
      border: none;
      outline: none;
      background-color: #1a365d;
      color: white;
      cursor: pointer;
      padding: 15px;
      border-radius: 50%;
      font-size: 18px;
      width: 50px;
      height: 50px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s, transform 0.3s;
    }
    
    #backToTopBtn:hover {
      background-color: #0f2042;
      transform: translateY(-3px);
    }
    
    /* Adding arrow icon inside button */
    #backToTopBtn::after {
      content: "‚Üë";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }		
  </style>
</head>
<body>

<div class="navbar">
  <div class="nav-left">
    <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
    <a href="index.html" class="nav-logo">PanguPlay</a>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="movies.html">Movies</a>
      <a href="series.html">Shows</a>
      <a href="dubbed.html">Tamil Dub</a>
	  <a href="720p.html">720p</a>
	  <a href="request.html">Request</a>
      <a href="https://t.me/+QscDhM495tM4NTg9" target="_blank">Telegram</a>
    </div>
  </div>
  
  <div class="nav-right">
    <div class="search-bar">
      <input type="text" placeholder="Search..." id="searchInput" oninput="searchFunction()">
      <button id="clearButton">‚úñ</button>
      <div class="search-results" id="searchResults"></div>
    </div>
  </div>
</div>

<!-- Mobile Menu Backdrop -->
<div class="mobile-backdrop" id="mobileBackdrop" onclick="closeMenu()"></div>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <button class="close-btn" onclick="closeMenu()">‚úñ</button>
  <a href="index.html">üè† Home</a>
  <a href="movies.html">üé¨ Movies</a>
  <a href="series.html">üì∫ Shows</a>
  <a href="dubbed.html">üéô Tamil Dub</a>
  <a href="720p.html">üéûÔ∏è 720p HD</a>
  <a href="request.html">üì© Request</a>
  <a href="https://t.me/+QscDhM495tM4NTg9" target="_blank">üí¨ Telegram</a>
</div>

<div class="swiper">
  <div class="swiper-wrapper" id="featured"></div>
  <div class="swiper-pagination"></div>
</div>


<div class="section" style="padding: 20px 15px;">
  <div class="section-header" style="display: flex; justify-content: space-between; align-items: center;">
    <h2>Tamil Shows</h2>
    <div class="filters">
      <select id="yearFilter">
        <option value="">Year</option>
        <!-- Years will be populated by JS -->
      </select>
      <select id="qualityFilter">
        <option value="">Quality</option>
        <!-- <option value="1080p">1080p</option> -->
        <option value="HD">HD</option>
       <!-- <option value="PreDVD">PreDVD</option> -->
      </select>
      <select id="sortFilter">
        <option value="lastupdated">Last Updated</option>
        <option value="desc">Title Z-A</option>
        <option value="asc">Title A-Z</option>
      </select>
      <button id="clearFilters" style="margin-left:8px;">Clear</button>
    </div>
  </div>
  <div class="cards" id="showsList"></div>
</div>

<!-- Back to top button -->
<button id="backToTopBtn" title="Go to top"></button>
<!--
<script disable-devtool-auto='true'
src='https://cdn.jsdelivr.net/npm/disable-devtool'
clear-log='true'
disable-select='true' 
disable-copy='true'
disable-cut='true' 
disable-paste='true'>
</script> -->

<footer>
  &copy; 2025 PanguPlay
</footer>

<script>
// Get the button
const backToTopButton = document.getElementById("backToTopBtn");

// When the user scrolls down 300px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
    backToTopButton.style.display = "block";
  } else {
    backToTopButton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
backToTopButton.addEventListener("click", function() {
  // For smooth scrolling
  window.scrollTo({
    top: 0,
    behavior: "smooth"
  });
});

const searchInput = document.getElementById("searchInput");
const clearButton = document.getElementById("clearButton");
const searchResults = document.getElementById("searchResults");

searchInput.addEventListener("input", function () {
    clearButton.style.display = this.value ? "block" : "none";
});

clearButton.addEventListener("click", function () {
    searchInput.value = "";
    searchResults.innerHTML = "";
    clearButton.style.display = "none";
    searchInput.focus();
});

// Generate a placeholder image based on the movie title
function generatePlaceholderImage(title) {
  // Extract initials or first letter
  const words = title.split(' ');
  const initials = words.length > 1 
    ? (words[0][0] + words[1][0]).toUpperCase()
    : title.substring(0, 2).toUpperCase();
  
  // Generate a pseudo-random color based on the title
  const hash = title.split('').reduce((acc, char) => char.charCodeAt(0) + acc, 0);
  const hue = hash % 360;
  const background = `hsl(${hue}, 60%, 20%)`;
  
  // Return HTML for placeholder
  return `<div class="placeholder-image" style="background: ${background}">
            <div class="placeholder-icon">üé¨</div>
            <div class="placeholder-text">${title}</div>
          </div>`;
}

// Get appropriate CSS class for quality tag
function getQualityClass(quality) {
  if (quality.includes('1080p') || quality.includes('1080p')) {
    return 'quality-4k';
  } else if (quality.includes('HD') || quality.includes('720p')) {
    return 'quality-hd';
  } else {
    return 'quality-sd';
  }
}

let videos = [];
fetch('series.json')
  .then(res => res.json())
  .then(data => {
    videos = data;
    populateYearFilter();
    filterAndRenderSeries();
    loadSwiper();
  });

const mobileMenu = document.getElementById("mobileMenu");
const menuIcon = document.querySelector(".menu-icon");

function toggleMenu() {
  const menu = document.getElementById("mobileMenu");
  const backdrop = document.getElementById("mobileBackdrop");
  menu.classList.add("open");
  backdrop.style.display = "block";
}

function closeMenu() {
  const menu = document.getElementById("mobileMenu");
  const backdrop = document.getElementById("mobileBackdrop");
  menu.classList.remove("open");
  backdrop.style.display = "none";
}

document.addEventListener("click", function (event) {
  const menu = document.getElementById("mobileMenu");
  const icon = document.querySelector(".menu-icon");
  if (!menu.contains(event.target) && !icon.contains(event.target)) {
    closeMenu();
  }
});

function searchFunction() {
  const input = document.getElementById('searchInput').value.toLowerCase();
  const results = document.getElementById('searchResults');
  results.innerHTML = '';
  if (input.length > 0) {
    const filtered = videos.filter(v => v.title.toLowerCase().includes(input));
    filtered.forEach(v => {
      const div = document.createElement('div');
      div.innerText = v.title;
      div.onclick = () => openPlayer(v);
      results.appendChild(div);
    });
    results.style.display = 'block';
  } else {
    results.style.display = 'none';
  }
}


// Helper to get unique years from videos
function getYears() {
  const years = new Set();
  videos.forEach(v => {
    const match = v.title && v.title.match(/\((\d{4})\)/);
    if (match) {
      years.add(match[1]);
    }
  });
  return Array.from(years).sort((a, b) => b - a);
}

// Populate year filter
function populateYearFilter() {
  const yearFilter = document.getElementById('yearFilter');
  getYears().forEach(year => {
    const opt = document.createElement('option');
    opt.value = year;
    opt.textContent = year;
    yearFilter.appendChild(opt);
  });
}

// Filtering logic
function filterAndRenderSeries() {
  const year = document.getElementById('yearFilter').value;
  const quality = document.getElementById('qualityFilter').value;
  const sort = document.getElementById('sortFilter').value;

  let filtered = videos.filter(v => v.type === 'series');

  if (year) {
    filtered = filtered.filter(v => {
      const match = v.title && v.title.match(/\((\d{4})\)/);
      return match && match[1] === year;
    });
  }
  if (quality) {
    filtered = filtered.filter(v => v.details && v.details.quality === quality);
  }

  // Sorting
  if (sort === 'asc') {
    filtered = filtered.sort((a, b) => a.title.localeCompare(b.title));
  } else if (sort === 'desc') {
    filtered = filtered.sort((a, b) => b.title.localeCompare(a.title));
  } else { // "lastupdated" or default
    filtered = filtered.sort((a, b) => parseDate(b.details.lastUpdated) - parseDate(a.details.lastUpdated));
  }

  // Render
  const series = document.getElementById('showsList');
  series.innerHTML = '';
  filtered.forEach(v => {
    const card = document.createElement('div');
    card.className = 'card';
    let imageContent;
    const quality = v.details.quality || 'SD';
    const qualityClass = getQualityClass(quality);
    if (v.image && v.image.trim() !== '') {
      imageContent = `
        <div class="card-image-container">
          <img src="${v.image}" alt="${v.title}" loading="lazy">
          <div class="quality-tag ${qualityClass}">${quality}</div>
        </div>`;
    } else {
      imageContent = `
        <div class="card-image-container">
          ${generatePlaceholderImage(v.title)}
          <div class="quality-tag ${qualityClass}">${quality}</div>
        </div>`;
    }
    card.innerHTML = `${imageContent}
                     <div class="card-title" style="padding:5px">${v.title}</div>`;
    card.onclick = () => openPlayer(v);
    series.appendChild(card);
  });
}

// Event listeners
document.addEventListener('DOMContentLoaded', () => {
  populateYearFilter();
  document.getElementById('yearFilter').onchange = filterAndRenderSeries;
  document.getElementById('qualityFilter').onchange = filterAndRenderSeries;
  document.getElementById('sortFilter').onchange = filterAndRenderSeries;
  document.getElementById('clearFilters').onclick = () => {
  document.getElementById('yearFilter').value = '';
  document.getElementById('qualityFilter').value = '';
  document.getElementById('sortFilter').value = 'lastupdated';
  filterAndRenderSeries();
};
  filterAndRenderSeries();
});


function openPlayer(video) {
  window.location.href = `splayer.html?id=${encodeURIComponent(video.id)}`;
}

function parseDate(dateString) {
  // Convert '18 April 2025' into a Date object
  return new Date(Date.parse(dateString));
}

function loadSwiper() {
  const featured = document.getElementById('featured');

  // Sort movies by lastUpdated and take the top 10
  videos
    .filter(v => v.type === 'series')
    .sort((a, b) => parseDate(b.details.lastUpdated) - parseDate(a.details.lastUpdated))
    .slice(0, 10)
    .forEach(v => {
      const slide = document.createElement('div');
      slide.className = 'swiper-slide';
      slide.innerHTML = `
        <div class="swiper-slide-content">
          <img src="${v.image}" alt="${v.title}">
          <div class="swiper-slide-title">${v.title}</div>
        </div>`;
      slide.onclick = () => openPlayer(v);
      featured.appendChild(slide);
    });

  // Initialize Swiper
  const swiper = new Swiper('.swiper', {
    slidesPerView: 3.0,
    spaceBetween: 10,
    loop: true,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
  });
}

loadSwiper();
/*
function loadShows() {
  const shows = document.getElementById('showsList');

  // Sort 720p movies/shows by lastUpdated in descending order (latest first)
  videos
    .filter(v => v.type === 'series')
    .sort((a, b) => parseDate(b.details.lastUpdated) - parseDate(a.details.lastUpdated))
    .forEach(v => {
      const card = document.createElement('div');
      card.className = 'card';
      
      // Check if image exists, if not use our new placeholder generator
      let imageContent;
	  const quality = v.details.quality || 'SD';
      const qualityClass = getQualityClass(quality);
      if (v.image && v.image.trim() !== '') {
        imageContent = `
          <div class="card-image-container">
            <img src="${v.image}" alt="${v.title}" loading="lazy">
            <div class="quality-tag ${qualityClass}">${quality}</div>
          </div>`;
      } else {
        imageContent = `
          <div class="card-image-container">
            ${generatePlaceholderImage(v.title)}
            <div class="quality-tag ${qualityClass}">${quality}</div>
          </div>`;
      }
      
      card.innerHTML = `${imageContent}
                       <div class="card-title">${v.title}</div>`;
      card.onclick = () => openPlayer(v);
      shows.appendChild(card);
    });
}

loadShows();
*/

</script>

</body>
</html>